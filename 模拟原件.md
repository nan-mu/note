# 模拟原件

## np结与二极管

理解np结需要理解在接上电压时多子少子的移动变化，但在解题过程中可以抽象地理解为np有两种工作状态——反向偏置和正向偏置。若认为n为负，p为正，那么使用我们过去熟悉的语言来描述偏置就是：正极电压高于负极电压为正向偏置，在后续的原件中我也将使用正负极代替n极p极，在学习过程中我认为很多名词是不那么容易使用的。

### 参数详解

* **偏置电压**$v_D$：简单来说就是加在正负极两段的电压，若负极接地，则 $v_D$ 为正极电势。其中 $_D$ 表示模拟，一般用D表示二极管，所以其上的电流就为 $i_D$。
* **接面电压**$V_{th}$（门槛电压，门坎电压，管压降）：将耗尽层视为一个随两端电压升高而阻值减小的电阻，这时一般认为当电压高于某一点时电阻不再变化，并且是其分得的电压不再发生变化，我们把这一点称为门槛电压，把不再变化的电压称为管压降，一般，锗管约为 $0.3V$，硅管约为 $0.7V$。

* **温度电压**$V_T$（热电压）：无具体物理意义，仅用于肖克利二极管模型中计算使用，一般取 $26mV$。

* **势垒电容**$C_b$：由于耗尽层两端存在，可以将耗尽层两端的半导体材料看作电容的极板，耗尽层看作电介质，这就是一个电容，可以预见耗净层越大，势垒电容越大。
* **伴随电阻**$R_D$：可以看作是半导体材料的电阻，一般不大，使用肖克利二极管模型计算出电流后得出。
* **微变电阻**$r_D$：存在交流输入时额外需要考虑的电阻。
* **反向电流**$I_S$：指 $v_D<0$ 且二极管电压未被击穿时的电压。
* **击穿电压**$V_{BR}$：如题，二极管击穿所需的最小电压，具体应用将在齐纳二极管中描述。

### UI

肖克利二极管模型：

$$
\tag{1.2.1}i_D=I_S(e^{v_D/(nV_T)}-1)
$$

> 需要注意的是，$n$ 为二极管理想因子，无实际物理意义，仅用于平衡肖克利二极管模型公式与实际器件间的误差。$n\approx 1 \sim 2 $

### 模型

#### 直流模型

在直流条件下一般考虑二极管有三个特性：伴随电阻、门槛电压、开关。简单来说，$v_D>0$，则开关导通，否则断开，这是理想模型；$v_D>V_{th}$开关导通，并且消耗了 $V_{th}$ 的电压，这是更高一层的理想模型；除了消耗电压，又串联一个电阻，这是最通用的理想模型。在具体的题目当中，一般需要计算伴随电阻，接面电压会直接给出。判断开关状态使用假设法（假设断开，然后计算 $v_D$ 来判断假设是否成立）。

#### 交流模型

在交流条件下，一般需要先使用叠加定理分离直流和交流信号，在具体的题目当中直流信号作为控制二极管是否导通的主要因素；交流条件下一般只考虑微变电阻：


$$
\tag{1.3.2.1}r_D=\frac{V_{th}}{i_D}
$$
其中电流需要通过肖克利模型计算，式子中的 $v_D$ 带入直流分量。

### 齐纳二极管（稳压管）

#### 工作状态

齐纳二极管也就是稳压管，使用时一般并联在输入和输出之间，当输入信号产生变化时，稳压管会使本来会和输入同步的输出信号的变化幅度减小以达到稳压的作用。

#### 参数详解

> 需要注意的是，在地大的教材中，齐纳二极管继承了硅二极管的所有特性（ $V_{th} = 0.7$ ），但似乎只有地大的教材这么认为；除开这些之外有：

* **稳定电压**$V_Z$：可以看作为稳压管的静态工作点电压，一般有一个范围。
* **稳定电流**$I_Z$：可以看作为稳压管的静态工作点电流，一般有一个范围。
* **稳定电阻**$I_Z$：可以看作为稳压管的静态工作点电阻，具体算法见下一节。

#### 模型

在地大的教科书中，稳压管可以被正向导通，$V_{th}=0.7V$ ，模型和普通二极管一样。正常工作，也就是反向击穿时，和普通二极管模型区别很少——将 $V_{th}$ 等效的直流源颠倒即可。有一以式子确定它的“管压降”：
$$
\tag{1.4.3}V_Z = V_{Z0}+I_ZR_Z
$$

## MOSFET，JFET

MOS管和JFET在参数和UI曲线（输入输出特性）上有很多相同点，在地大的习题上很多例题也把两者放在一起，故放在一起讨论。其实单纯使用图解法的话其实FET和BJT的操作都是一样的

### 参数详解

> *斜体* 为在正常习题中无需考虑的参数

* **开启电压 $V_{TN}$**：这是E型MOS管的参数，仅用于计算MOS管UI公式。具体物理意义不考。一般而言，NFET的 $V_{TN}$ 通常为负，而PMOS的 $V_{TN}$ 通常为正 。所以在根据电势判断元件类型的题目中，如果记得公式的话可以一次进行判断。
* **夹断电压**$V_{PN}$：在实际做题当中会使用该参数带入公式计算，物理意义表示输出即将进入饱和区的$V_{DS}$的电压。
* *额定电压* $V_{DSS}$：漏极 (D)与源极 (S)之间所能施加的最大电压值。一般在选型题中会考。
* *栅极电压* $V_{GSS}$：栅极 (G)与源极 (S)之间所能施加的最大电压值。一般在选型题中会考。
* *额定电流 $I_{D (DC)}$*：漏极允许通过的最大直流电流值。此值受到导通阻抗、封装和内部连线等的制约。
* **漏极电流** $I_{DSS}$：把FET在$V_{GS}=0$，即栅极不工作时，源极和漏极构成一个二极管，而这个二极管的反向电流就是$I_{DSS}$
* *直流电阻*$R_{GS}$：如题。

> 由二极管的性质可知，FET同样也有电容，但一般不会在计算放大电路中出现。并且也有$V_{th}$，但也不考虑

### 图解法

#### 静态工作点

该方法需要已知FET的 $u_c-i_c$ 和 $u_B-i_B$ 两个曲线。

| <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/a3793086506a52effad3c9b99ffedf8786442211.png" astyle="filter: invert(1)" /> | <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/10facb0a8610397a94f02a28c6ee117786442211.png" astyle="filter: invert(1);"/> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| (a) 输出特性曲线                                             | (b) 输入特性曲线                                             |

<center>图2.2.1.1 输入输出特性曲线</center>

图解法故名思意，是通过将电路的曲线方程画在同一个图上以代替联立计算的方式。这时由于在分析交流输入时，输入和输出一般是一个曲线。也确实可以通过方程计算的方式来得出一个交流的结果，但在分析诸如失真问题和选取静态工作点是就比较麻烦了，具体计算方法见2.3.1，这里记录原汁原味的图解法。

图解法的原理就是联立4个方程，处理5个未知量，得到1个对应关系。但在原汁原味的图解法当中则是使用图(a)和图(b)来代替人工求解时最难处理的两个方程将计算分为两步，即静态工作点分析和动态分析。其中静态分析是最为重要的一步，下面是共基极放大电路中的具体步骤：

1. 画出直流负载线，如图2.2.1.1 (b)。
2. 通过基极回路求出 $I_B$ 的值1。
3. 找出 $I_B=I_{BQ}$ 这一条输出特性曲线与直流负载线的交点，即为静态工作点 $Q$。

#### 动态分析

动态分析主要用于得出输入交流信号和输出交流信号的关系，一般来说，基极和输入间就串联了一个耦合电容，集电极和输出间也只串联了一个解耦电容，所以输入输出间的关系就是基极和漏极电压的交流信号的关系。

但由于放大电路是耦合的，一般而言，直流信号远大于交流信号，所以分析时可以看作静态工作点附近加入了一个交流信号，体现在计算中就是（其中，$u_i$ 为接在基极上的交流信号）：

$$
\tag{2.2.2.1}u_B = U_{BQ}+u_i
$$

现在已知 $u_i$，那么在图2.2.1.1(b)中就可以画出 $u_i$ 与 $i_B$ 间的关系，在一般放大电路中可以通过一个方程得出 $i_b$ 与 $i_C$ 间的关系（在使用原汁原味的图解法时，这个方程为 $i_B=i_C$），而通过图2.2.1.1(a) 就可以画出 $i_c$ 与 $U_{CC}$ 间关系其中去掉 $U_{CC}$ 中的直流分量得到的电压就是 $u_o$，这样就建立了 $u_i$ 到 $u_o$ 的对应关系。以上就是图解法分析的全部过程。上面提到的方法如下：

<img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/9e8e2e645d79d470528bdf2d4e22c01686442211.png"  astyle="filter: invert(1)" />

<center>图2.2.2.1 图解法找函数关系</center>

### UI公式与小信号模型（解析法）

$$
\tag{2.3.1}I_D=\mu_nC_{ox}\frac{W}{L}\left[(V_{GS}-V_{TH})V_{DS}-\frac12V_{DS}^2\right]
$$

其中 $\mu_n$ 为载流子迁移率，$C_{ox}$ 为单位面积电容，$W$ 和 $L$ 为MOS长宽参数。还有一个没见过但似乎见过的参数为 $V_{TH}$，不难联想到他和 $V_{TN}$ 有关。具体联系是半导体物理的事，在正常情况下我们只需要认为 $V_{TH}=-V_{TN}$ 即可。在作业中我记得有一道题给的是 $V_T$，是个正值，套进公式后算出来是虚数解，直接给我干蒙了，现在发现可能他给的是 $V_{TH}$ 而公式需要 $V_{TN}$。在做题当中可能需要灵活给这个值添加负号（一般需要让它和 $V_{GS}$ 相减），反正地大是这样的。

但这个式子是纯纯半导体物理中推出来的，实际计算中基本没法使用，因为一般正常工作的FET是工作在饱和区的，这时一般使用这个式子：
$$
\because 饱和\therefore V_{DS} = V_{GS}-V_{TN}\\
\therefore 由2.2.1得
\tag{2.3.2}\begin{align}{}
i_D&=K_n(v_{GS}-V_{TN})^2\\
&=K_n(v_{GSQ}+v_{gs}-V_{TN})^2\\
&=K_n(V_{GSQ}-V_{TN})^2+2K_n(V_{GSQ}-V_{TN})v_{gs}+K_nv_{gs}^2
\end{align}
$$
其中 $V_{DS} = V_{GS}-V_{TN}$ 很好理解，$I_D$ 不随 $V_{DS}$ 变化。$K_n = \mu_nC_{ox}\frac{W}{2L}$ 作为定值简化书写（这玩意叫本真导电因子）。

观察所得多项式，可以发现第一项为常数项，只和直流信号有关（$V_{GSQ}$ 为静态工作点，和放大电路的直流输入有关，具体内容在图解法中介绍）。而直流信号是会被耦合电容滤掉的，分析时一般不关注它。第三项的变量只有 $v_{gs}$，和第二项比较起来非常之小，所以现在也可以直接将其忽略。

>  在一次作业中时我没有忽略第三项，结果发现它的数量级在 $10^{-6}\sim10^{-7}$ 附近，不保真，但可以看出这个量确实非常小。

所以在得到了 $V_{DS} $和 $V_{TN}$ 后，可以发现输出端和输入端唯一的联系就只剩下id了，用电路描述就是这样：

| <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/428498541681dc7b4fd3af3f697a54fc86442211.png" astyle="filter: invert(1);"/> | <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/ca7507f3362df0a9a5da091dba1b942d86442211.png" astyle="filter: invert(1)"/> |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|                          (a) 原电路                          |                         (b) 等效模型                         |

<center>图2.3.1 MOSFET与等效模型</center>

所以这就是FET的等效模型（JFET和MOSFET是一样的）。其中有两个新的参数互导 $g_m$ 和输出电阻 $r_{ds}$。以下是计算公式：
$$
g_m = 2K_n(V_{GSQ}-V_{TN})\\
r_{ds}=[\lambda K_n(V_{GSQ}-V_{TN})^2]^{-1}
$$
其中输出电阻是通过输出电流和输出电压求导得出，也就是 $r_{ds}=\frac{dv_{ds}}{di_{ds}}$，这一过程相当复杂，这里就不展开了，最后的计算公式增加了一个新参数 $\lambda$ ——通道长度调制系数。看名字知作用。

### 失真分析与优化电路计算

总结起来就是由于静态工作点与输入交流信号不匹配，但这个问题可以通过修改电路解决。一般使用图解法分析失真问题。这类问题一般涉及到两点，一是计算合适的静态工作点，二是如何计算优化后的电路。

| <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/b7b368bd6fdb0361cbf0534a28f305b786442211.png" astyle="filter: invert(1)" /> | <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/2a840f7ec60df7cc0c5a0fad2e2bd7b186442211.png"  astyle="filter: invert(1)" /> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| (a) 交流模型                                                 | (b) 图解法找函数关系                                         |

<center>图2.4.1 失真问题分析</center>

首先了解图(b)，在FET中，区域 $i_c A O$ 乘坐放大区，区域 $u_{CR}OB$ 成为截至去，两区域间成为饱和区，FET正常放大时应该使用饱和区，而输出失真也就是输入信号脱离了饱和区。所以判断是否失真的方法就是观察波形是否越过A点以上，是否越过B点以下；而一个FET放大电路的好的静态工作点，就是AB的中点。这就是计算合适静态工作点的方法。

第二个问题就是优化后的电路，现在的电路比起之前复杂了许多，但能够解决很多问题，一般题目碰到这类题目时就单纯考察理解和计算了，下面是计算方法，首先优化后的电路如图：

| <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/488c29ca2bfa1a28575439debda7f72a86442211.png" style="filter: invert(1)"/> | <img src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/2457b6712292d45551005038cd0f236c86442211.png" class="img" style="filter: invert(1)"/> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| (a) 完整电路                                                 | (b) 直流模型                                                 |

<center>图2.4.2 优化电路</center>

现在只关注直流模型，首先我们需要知道的是静态工作点，主要是 $U_{CE}$ ，因为$U_{BE}$ 已经给出，一般为 $V_{th}$ 的值，也是正常工作的 $U_{BEQ}$。

那么已知量有除 $U_{CE}$ 以外的电压，所有的电阻。未知量有所有的电流。随后根据简单的电路分析我们可以列出一下四个方程：
$$
\begin{array}{l}
&U_{cc}-R_CI_C &= U_{CE}+I_ER_E\\
&U_{cc}-R_{B1}I_1 &= U_{BE}+I_ER_E\\
&U_{cc}-R_{B1}I_1-R_{B2}(I_1-I_B)&=0\\
&I_B+I_C &= I_E
\end{array}
$$

经过整理可以得出 $I_C$ 与 $U_{CE}$ 间的关系：
$$
U_{CE}=U_{cc}\cdot\frac{\frac{R_{B1}R_E+R_{B1}R_{B2}}{R_{B1}+R_{B2}}}{R_E+R_{B_1}//R_{B_2}}-(R_C+R_E+\frac{R_E^2}{R_E+R_{B1}//R_{B2}})I_C+\frac{R_E}{R_E+R_{B1}//R_{B2}}U_{BE}
$$
可见这个式子似乎不太适合计算，一般来说，在实际应用和做题当中应用计算机计算，或者直接使用解析法计算。
